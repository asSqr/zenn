---
title: "Pros / Cons 分析による複数候補の検討について"
emoji: "👻"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

## 概要
何か拮抗している複数の候補から一つを選定したいという場面は多々あります．決めうちで一つ選ぶより，代替案の優れている点・劣っている点を複数検討した上で決定したという根拠があれば，説得力が増します．

開発者はプログラミングにおいてロジックを扱いますが，自然言語のドキュメントにおいてもロジック——根拠に支持された意見——を意識すべきです．何かを選定する，選ぶということは暗に他にある代替案より選択した案が優れているという主張であると受け取られるため，その根拠に対する説明責任が生じると考えた方が良いようです．

つまり，「なんでああすることもできたのにそうではなくこうしたのですか？」という指摘に答えられる努力はすべきということです．

この際，あらゆる観点で優れた案があればそれを迷わず選べば良いので，実際には，ある案はこの観点で優れているが別の観点ではもう一つの案に劣っている，というような「どっこいどっこい」な状況が問題となります．

このような意思決定は，専門的には multi-criteria decision making と呼ぶようです．この一種である Pros / Cons 分析は幅広く知られていますが，個人的に満足いく質の記述が見当たらなかったため，本稿ではこのような日常的にも応用可能な選定の方法論について，具体例を交えながらまとめたいと思います．

## Pros / Cons 分析とは
ある選定に対し複数の候補を挙げ，そのメリット (Pros)・デメリット (Cons) を書き出して比較検討する手法です．表にして書き出すことが多いです．

<br />
旅行の移動手段
| # | 案 | メリット | デメリット |
| ---- | ---- | ---- | ---- |
| 1 | 新幹線 | ・保安検査等がなく乗車が楽 <br /> ・値段が安い | ・時間がかかる <br /> ・車窓の楽しみは少ない |
| 2 | 飛行機 | ・時間がかからない <br /> ・飛行中窓の外を見るなど空の旅の楽しみがある | ・保安検査等搭乗の手間がかかる <br />・値段が高い

例 1：Pros / Cons 分析の例．異なる観点のものでもメリット・デメリットに挙げてしまっている．

<br />

ただ，異なる観点のメリット・デメリットを併置しているだけと揶揄されることもあり，もう少し細かい粒度のものとして，各案と各観点のマトリックスを作り，その交点にどのくらい優れているかを定性的 (◯ △ × など) あるいは定量的に示します．

<br />

| # | 案 | 乗車の手間 | 料金 | 所要時間 | 旅の楽しみ |
| ---- | ---- | :----: | :----: | :----: | :----: |
| 1 | 新幹線 | ◯ | △ | × | × |
| 2 | 飛行機 | × | × | ◯ | ◯ |

例 2：Pros / Cons 分析を観点ごとに粒度を細かくし，定性的に評価した例．

<br />

ただし，定性的な評価では悪く言えば直感的な評価しかできず，各案の比較には定量的な数値を用いるのが望ましいです．その度に副次的な数値を集計・計算したり，各観点になんらかの基準で重みづけをします．次節ではその具体的な方法について述べます．

## 定量的な Pros / Cons 分析 (Pilot Method)
Pilot Method として知られる方法を，候補を挙げるところから順を追って説明します．各ステップは途中で終了しても良いです (ただし，精度は下がります)．

### Stage 1. Pros / Cons リストを作る
ブレインストーミングし，いくつも候補を挙げ，メリット・デメリットを書き出した Pros / Cons リストを作ります．型やクラスタに分けて代表となる案を探します．分析して評価が高い方から多く選びます．絶対に受け入れられないものは除外します．

### Stage 2. マトリックスを作る
列挙した候補のメリット・デメリットに現れている観点を探します．4 つくらい主となるものを決めて，「その他」と「直感」を付け加え，6 つまでにしておいた方が良いです．候補と観点のマトリックスを埋めます．その際，「その他」以外は空欄にしません．そして，この時「コスト」の観点がないことを強調しておきます．

つまり，ここまでがおおよそ前節で説明した内容になります．ここから，定量的に重み付けすることで候補を選定します．

### Stage 3. 候補にランクをつける
前述の通り，全部の基準について優れた案は滅多にないです (そのようなケースでは分析の必要がない)．まず「直感」に直感的にランクをつけます．そして，各観点について同列もありでランクをつけます．

各観点について，ランキングのワースト 1 位から順番に 1, 2, 3, ... と重みをつけていき，各行 (各候補) について和を取ります．この和がスコアになります．

### Stage 4. 観点にランクをつける
さらに精緻な分析をする場合，上のように観点を同列に扱うのではなく，観点の間にも重みをつけます．観点間の重みは絶対的なものではなく，どのような候補が列挙されているかという具体的なケースごとに違うものです．

例えば，ハードディスクを選ぶ際に，

| # | 料金 | ディスク容量 |
| ---- | :----: | :----: |
| 1 | $50 | 1000GB |
| 2 | $55 | 2000GB |
| 3 | $60 | 3000GB |

のような候補が列挙されている時は，#3 の案を選ぶべきですが，

| # | 料金 | ディスク容量 |
| ---- | :----: | :----: |
| 1 | $50 | 1300GB |
| 2 | $70 | 1400GB |
| 3 | $90 | 1500GB |

の時は #1 の案を選ぶべき，のように状況によって異なります．

観点も同様にワースト 1 位から 1, 2, 3, ... と重みをつけ，重み付き和を取ります．これがスコアになります．これでコストを抜きにしたランキングが決まります．「その他」の観点には 0 や 1 の重みをつけて排除 or 考慮します．「直感」の観点の重みは 0 にします．

このシンプルな方法が効果的であると数学的に示されています．コストパフォーマンスを考えれば最適です．

解析結果と「直感」観点のランクが同じなら良いですが，差異があるなら分析と矛盾する無意識な情報があります．

### Stage 5. コストを考える
このステージではコストを考えます．もっともコストの低いものをベースとしてそこからのコストの増加，重み付き和であるスコアの違いを表にします．

コストが高くスコアが低い明確に劣ったものは除外します．

ベースからコストの昇順に見て，コストに対して上がるスコアが納得できる場合は ベースを棄却してこれを採用するということを繰り返します．そして最終的に残ったものが選定されます．

これが文献 [1] において説明されている Pilot Method ですが，スコアやコストによる定量的な比較をしているようで，定性的な部分が含まれます．すなわち各観点における候補や観点間の重みのランクをつける部分です．この部分をより定量的で副次的な情報によって根拠づけると良いでしょう．

## まとめ
複数候補があってどれか一つを採用したいという場面は多々あります．ロジックを意識しないとつい「決めの問題」として決めうちで選んでしまいがちですが，本稿で述べたように複数候補を挙げてそのメリット・デメリットを観点に分けて比較検討することで，選定に対する説得力が上がります．

案外「複数のやり方がありうる」場面は多く，そういう部分を積極的に見出して逐一検討するのが良いと思います．使用する技術の選定から，設定するタイムアウトのミリ秒数まで，なぜそうしているかという根拠を説明できた方が望ましいです．

この際，できるだけ定量的な分析が望ましいです．客観的と考えられており，比較も厳密です．本稿で述べたように比較検討そのものに対するランキングだけでなく，連携ファイルの 1 行のデータのサイズや，ありうる最大件数など，関わっている案件の各種数値を整理して把握しておくと良いでしょう．それを根拠に判断の基礎となる数値を計算できると説得力が上がります．

ロジックはソースコード上だけでなく，ドキュメントにおいても活用し，その選定が確かに確度が高いということを示すべきです．

## 参考文献
- [1] Danielson, Mats, and Love Ekenberg. Real-Life Decision-Making. Taylor & Francis, 2024.